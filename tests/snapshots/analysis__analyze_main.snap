---
source: tests/analysis.rs
expression: output
---
Root{defs:[Def{kind:Function{name:"negation",params:[Param{name:"x",type:Primitive{type:"I32"}}],body:Expr{type:Primitive{type:"Never"},kind:Block{exprs:[Expr{type:Primitive{type:"Never"},kind:Return{value:Expr{type:Primitive{type:"I32"},kind:UnaryOp{op:"Neg",expr:Expr{type:Primitive{type:"I32"},kind:Identifier{name:"x"}}}}}}]}},return_type:Primitive{type:"I32"}}},Def{kind:Function{name:"ptr",params:[Param{name:"x",type:Primitive{type:"I32"}}],body:Expr{type:Primitive{type:"Never"},kind:Block{exprs:[Expr{type:Primitive{type:"I32"},kind:LetBinding{name:"a",type_annotation:unresolved,value:Expr{type:Primitive{type:"I32"},kind:Literal{value:Int(10)}}}},Expr{type:Primitive{type:"I32"},kind:LetBinding{name:"b",type_annotation:unresolved,value:Expr{type:Primitive{type:"I32"},kind:Literal{value:Int(20)}}}},Expr{type:Pointer{to:Primitive{type:"I32"}},kind:LetBinding{name:"p1",type_annotation:unresolved,value:Expr{type:Pointer{to:Primitive{type:"I32"}},kind:UnaryOp{op:"AddressOf",expr:Expr{type:Primitive{type:"I32"},kind:Identifier{name:"a"}}}}}},Expr{type:Pointer{to:Primitive{type:"I32"}},kind:LetBinding{name:"p2",type_annotation:unresolved,value:Expr{type:Pointer{to:Primitive{type:"I32"}},kind:UnaryOp{op:"AddressOf",expr:Expr{type:Primitive{type:"I32"},kind:Identifier{name:"b"}}}}}},Expr{type:Primitive{type:"Usize"},kind:LetBinding{name:"offset",type_annotation:Primitive{type:"Usize"},value:Expr{type:Primitive{type:"Usize"},kind:Literal{value:Int(8)}}}},Expr{type:Pointer{to:Primitive{type:"I32"}},kind:LetBinding{name:"x",type_annotation:unresolved,value:Expr{type:Pointer{to:Primitive{type:"I32"}},kind:BinOp{op:"Add",left:Expr{type:Pointer{to:Primitive{type:"I32"}},kind:Identifier{name:"p1"}},right:Expr{type:Primitive{type:"Usize"},kind:Identifier{name:"offset"}}}}}},Expr{type:Primitive{type:"Never"},kind:Return{value:Expr{type:Primitive{type:"I32"},kind:UnaryOp{op:"Deref",expr:Expr{type:Pointer{to:Primitive{type:"I32"}},kind:Identifier{name:"x"}}}}}}]}},return_type:Primitive{type:"I32"}}},Def{kind:Function{name:"v",params:[],body:Expr{type:Primitive{type:"Never"},kind:Block{exprs:[Expr{type:Primitive{type:"I32"},kind:LetBinding{name:"x",type_annotation:unresolved,value:Expr{type:Primitive{type:"I32"},kind:Block{exprs:[Expr{type:Primitive{type:"I32"},kind:LetBinding{name:"a",type_annotation:unresolved,value:Expr{type:Primitive{type:"I32"},kind:Literal{value:Int(2)}}}},Expr{type:Primitive{type:"I32"},kind:BinOp{op:"Add",left:Expr{type:Primitive{type:"I32"},kind:Literal{value:Int(32)}},right:Expr{type:Primitive{type:"I32"},kind:Identifier{name:"a"}}}}]}}}},Expr{type:Primitive{type:"Never"},kind:Return{value:Expr{type:Primitive{type:"I32"},kind:Identifier{name:"x"}}}}]}},return_type:Primitive{type:"I32"}}},Def{kind:Function{name:"test",params:[Param{name:"a",type:Primitive{type:"I32"}}],body:Expr{type:Primitive{type:"Never"},kind:Block{exprs:[Expr{type:Primitive{type:"I32"},kind:LetBinding{name:"x",type_annotation:unresolved,value:Expr{type:Primitive{type:"I32"},kind:Call{func:Expr{type:unresolved,kind:Identifier{name:"negation"}},args:[Expr{type:Primitive{type:"I32"},kind:BinOp{op:"Add",left:Expr{type:Primitive{type:"I32"},kind:Call{func:Expr{type:unresolved,kind:Identifier{name:"ptr"}},args:[Expr{type:Primitive{type:"I32"},kind:Literal{value:Int(90)}}]}},right:Expr{type:Primitive{type:"I32"},kind:BinOp{op:"Mul",left:Expr{type:Primitive{type:"I32"},kind:Identifier{name:"a"}},right:Expr{type:Primitive{type:"I32"},kind:Call{func:Expr{type:unresolved,kind:Identifier{name:"v"}},args:[]}}}}}}]}}}},Expr{type:Primitive{type:"Never"},kind:Return{value:Expr{type:Primitive{type:"I32"},kind:Identifier{name:"x"}}}}]}},return_type:Primitive{type:"I32"}}}]}
